<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì†Œì› ë¦¬ìŠ¤íŠ¸</title>
    <link rel="stylesheet" href="/assets/css/style2.css">
    
</head>
<body>
    <div class="video-background">
    <iframe width="560" height="315" src="https://www.youtube.com/embed/3PmVJQUCm4E?enablejsapi=1&autoplay=1&mute=1&controls=0&modestbranding=1&rel=0&showinfo=0&fs=0&disablekb=1"
    id="youtube-video"
    frameborder="0" 
    allow="autoplay; encrypted-media"
    allowfullscreen></iframe>
   
</div>


    <h1></h1>
    <div id="wish-container"></div> <!-- ì†Œì›ì´ ëœë¤í•˜ê²Œ ë– ë‹¤ë‹ ì»¨í…Œì´ë„ˆ -->
</div>
<div class="soap-button">
<a href="/index.html">
    <img id="soap-icon" src="/assets/images/soapbutton.png" alt="ë¹„ëˆ„ ë²„íŠ¼">
</a>
</body>
<script>
    function loadWishes() {
        let wishes = JSON.parse(localStorage.getItem("wishes")) || []; // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì—ì„œ ì†Œì› ê°€ì ¸ì˜¤ê¸°
        const wishContainer = document.getElementById("wish-container");
        const soapButton = document.querySelector(".soap-button"); // ë¹„ëˆ„ ë²„íŠ¼ ê°€ì ¸ì˜¤ê¸°
        const buttonRect = soapButton.getBoundingClientRect(); // ë¹„ëˆ„ ë²„íŠ¼ ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸°

        wishes.forEach((wish) => {
            let wishBubble = document.createElement("div");
            wishBubble.classList.add("wish-bubble");
            wishBubble.textContent = wish; // âœ… ë¬¸ìì—´ ê·¸ëŒ€ë¡œ ì‚¬ìš©

            let maxX = 85; // ìµœëŒ€ xê°’ ì œí•œ (100vwë³´ë‹¤ ì‘ê²Œ)
            let maxY = 85; // ìµœëŒ€ yê°’ ì œí•œ (100vhë³´ë‹¤ ì‘ê²Œ)

            let safePosition = false;
            let x, y;

            while (!safePosition) {
                x = Math.random() * maxX + 5; // 5vw ~ 90vw ë²”ìœ„
                y = Math.random() * maxY + 5; // 5vh ~ 90vh ë²”ìœ„

                let bubbleLeft = (x / 100) * window.innerWidth;
                let bubbleTop = (y / 100) * window.innerHeight;

                // ğŸ”¹ ë¹„ëˆ„ ë²„íŠ¼ê³¼ ê²¹ì¹˜ì§€ ì•ŠëŠ” ìœ„ì¹˜ ì°¾ê¸°
                if (!(bubbleLeft + 50 > buttonRect.left &&
                      bubbleLeft - 50 < buttonRect.right &&
                      bubbleTop + 50 > buttonRect.top &&
                      bubbleTop - 50 < buttonRect.bottom)) {
                    safePosition = true;
                }
            }

            wishBubble.style.left = `${x}vw`;
            wishBubble.style.top = `${y}vh`;

        // ğŸ”¹ ëœë¤í•œ ì• ë‹ˆë©”ì´ì…˜ ì†ë„ ì„¤ì • (5~8ì´ˆ ì‚¬ì´)
        let randomDuration = Math.random() * 2 + 3; // 5s ~ 8s
        let randomDelay = Math.random() * 2; // 0s ~ 2s ë”œë ˆì´ ì¶”ê°€
        wishBubble.style.animation = `floatAnimation ${randomDuration}s infinite ease-in-out alternate`;

        // ğŸ”¹ ëœë¤í•œ ë°©í–¥ ì„¤ì •
        let randomDirectionX = Math.random() > 0.5 ? 1 : -1;
        let randomDirectionY = Math.random() > 0.5 ? 1 : -1;

        wishBubble.style.setProperty('--directionX', randomDirectionX);
        wishBubble.style.setProperty('--directionY', randomDirectionY);

        wishContainer.appendChild(wishBubble);
    });
}

    // âœ… í˜ì´ì§€ê°€ ë¡œë“œë  ë•Œ ì†Œì› ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
    window.onload = loadWishes;

    
</script>
<script>
    var player;
    function onYouTubeIframeAPIReady() {
        player = new YT.Player('youtube-video', {
            events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
            }
        });
    }

    function onPlayerReady(event) {
        event.target.playVideo();
        event.target.seekTo(20); // 20ì´ˆë¶€í„° ì‹œì‘
    }

    function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING) {
            setInterval(() => {
                let currentTime = player.getCurrentTime();
                if (currentTime >= 64) { // 106ì´ˆ(1ë¶„ 46ì´ˆ)ì— ë„ë‹¬í•˜ë©´
                    player.seekTo(20); // 20ì´ˆë¡œ ë‹¤ì‹œ ì´ë™
                }
            }, 1000);
        }
    }
</script>
<script src="https://www.youtube.com/iframe_api"></script>


</html>
